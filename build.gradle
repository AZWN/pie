group 'mb'
version '0.1.0-SNAPSHOT'

buildscript {
  ext {
    kotlinVersion = '1.1.2-2'
    kotlin_version = kotlinVersion
    javaVersion = JavaVersion.VERSION_1_8
    junitVersion = '5.0.0-M4'
    guiceVersion = '4.1.0'
  }

  repositories {
    jcenter()
    mavenCentral()
  }
  dependencies {
    classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion" // Kotlin Gradle plugin
  }
}

apply plugin: 'java'
apply plugin: 'kotlin'


compileJava {
  sourceCompatibility = javaVersion
  targetCompatibility = javaVersion
}
compileTestJava {
  sourceCompatibility = javaVersion
  targetCompatibility = javaVersion
}


compileKotlin {
  kotlinOptions {
    jvmTarget = "1.8"
  }
}
compileTestKotlin {
  kotlinOptions {
    jvmTarget = "1.8"
  }
}


dependencies {
  compile "org.jetbrains.kotlin:kotlin-stdlib-jre8:$kotlinVersion"
  compile "org.jetbrains.kotlinx:kotlinx-coroutines-core:0.15"
  compile "com.google.inject:guice:$guiceVersion"
  compile "com.google.inject.extensions:guice-assistedinject:$guiceVersion"
  compile 'org.lmdbjava:lmdbjava:0.0.5'

  // JUnit 5 (http://junit.org/junit5/docs/current/user-guide/)
  testCompile "org.junit.jupiter:junit-jupiter-api:$junitVersion"
  testCompile "org.junit.jupiter:junit-jupiter-params:$junitVersion"
  // https://github.com/JeffreyFalgout/junit5-guice-extension
  testCompile 'name.falgout.jeffrey.testing:junit5-guice-extension:1.0.0-M3'
  // In-memory filesystem implementation for testing (https://github.com/google/jimfs)
  testCompile 'com.google.jimfs:jimfs:1.1'
  // Mockito for Kotlin (https://medium.com/@elye.project/befriending-kotlin-and-mockito-1c2e7b0ef791)
  testCompile 'com.nhaarman:mockito-kotlin:1.4.0'
  testCompile "org.jetbrains.kotlin:kotlin-reflect:$kotlinVersion"
}


repositories {
  jcenter()
  mavenCentral()
}
